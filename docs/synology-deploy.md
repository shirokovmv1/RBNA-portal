# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞–ª–∞ –Ω–∞ Synology (–ø–æ—à–∞–≥–æ–≤–æ)

## 1) –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ Synology

### 1.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ Package Center:
  - **Web Station**
  - **PHP 8.x**
  - **Apache HTTP Server** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `.htaccess`)

### 1.2 –°–æ–∑–¥–∞—Ç—å —Å–∞–π—Ç –≤ Web Station
- Web Station ‚Üí **Web Portal** ‚Üí Create
  - Site name: `bso-portal`
  - Document root: `web/bso_portal/`
  - PHP profile: `PHP 8.x`

### 1.3 –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç –≤ `web/bso_portal/`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:
  - `https://<host>/bso_portal/`
  - `https://<host>/bso_portal/api/news.php`

### 1.4 –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
- –î–∞—Ç—å **RW** –ø—Ä–∞–≤–∞ –¥–ª—è `web/bso_portal/api/data/`
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å/–≥—Ä—É–ø–ø–∞ `http` (–∏–ª–∏ `www`) –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å.

### 1.5 –ó–∞—â–∏—Ç–∞ JSON (Nginx)
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Nginx, –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—Ä–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ JSON (—Å–º. `docs/nginx-snippet.conf`).
- –ï—Å–ª–∏ Apache, –∑–∞—â–∏—Ç–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è `.htaccess` –≤ `api/data/`.

### 1.6 HTTPS
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let‚Äôs Encrypt –∏–ª–∏ —Å–≤–æ–π).
- –û—Ç–∫—Ä—ã–≤–∞—Ç—å –ø–æ—Ä—Ç–∞–ª —á–µ—Ä–µ–∑ HTTPS.

### 1.7 SMTP (–æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º –¥–ª—è Help Desk)
> –ü–æ—Ä—Ç–∞–ª –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∏—Å—å–º–∞ —á–µ—Ä–µ–∑ `mail()` (PHP). –ù—É–∂–µ–Ω —Ä–∞–±–æ—á–∏–π SMTP/relay –Ω–∞ Synology.

1) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—á—Ç—ã  
- **Mail Server** –∏–ª–∏ **MailPlus Server** (Package Center).

2) –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SMTP‚Äërelay  
- –û—Ç–∫—Ä—ã—Ç—å Mail Server/MailPlus ‚Üí **SMTP**.  
- –í–∫–ª—é—á–∏—Ç—å SMTP‚Äë—Å–µ—Ä–≤–∏—Å.  
- –£–∫–∞–∑–∞—Ç—å **SMTP relay** (–∞–¥—Ä–µ—Å, –ø–æ—Ä—Ç, –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å) –æ—Ç –≤–∞—à–µ–≥–æ –ø–æ—á—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.  
- –í–∫–ª—é—á–∏—Ç—å **Require authentication** (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º).

3) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è  
- –î–æ–º–µ–Ω—ã/From‚Äë–∞–¥—Ä–µ—Å: `no_reply@bso-cc.ru` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–∑—Ä–µ—à—ë–Ω –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ.  
- –ï—Å–ª–∏ –µ—Å—Ç—å SPF/DKIM ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å–∏ –≤ DNS (–ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ—á—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞).

4) –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PHP  
- Web Station ‚Üí **PHP Settings** ‚Üí –ø—Ä–æ—Ñ–∏–ª—å —Å–∞–π—Ç–∞.  
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `sendmail_path` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ `/usr/sbin/sendmail`.  
- –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –ø–æ—á—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å ‚ÄúSend mail‚Äù).

5) –¢–µ—Å—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏  
- –°–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª `test-mail.php` –≤ –∫–æ—Ä–Ω–µ —Å–∞–π—Ç–∞:
```php
<?php
mail('you@company.ru', 'Test mail', 'SMTP test from Synology');
echo 'OK';
```
- –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ `https://<host>/bso_portal/test-mail.php` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–∏—Å—å–º–æ –ø—Ä–∏—à–ª–æ.

## 2) –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ—Ä—Ç–∞–ª–∞

### 2.1 –ù–∞—Å—Ç—Ä–æ–∏—Ç—å API URL
–í `app.js`:
```js
apiUrl: '/bso_portal/api'
```
–ï—Å–ª–∏ –ø–æ—Ä—Ç–∞–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –∫–æ—Ä–µ–Ω—å —Å–∞–π—Ç–∞, –æ—Å—Ç–∞–≤–∏—Ç—å:
```js
apiUrl: '/api'
```

### 2.2 –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–æ–≤
- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å `docs/users.json.example` –≤ `api/data/users.json`.
- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ö—ç—à –ø–∞—Ä–æ–ª—è —á–µ—Ä–µ–∑ `docs/password-hash.php`.

### 2.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- –í –∞–¥–º–∏–Ω–∫–µ –≤–Ω–∏–∑—É –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
  - **üåê –°–µ—Ä–≤–µ—Ä–Ω–æ–µ (Synology)**
- –ï—Å–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è **üíæ –õ–æ–∫–∞–ª—å–Ω–æ–µ**, –∑–Ω–∞—á–∏—Ç API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

## 3) –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- –û—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Äî –¥–∞–Ω–Ω—ã–µ –≤–∏–¥–Ω—ã.
- –ê–¥–º–∏–Ω–∫–∞ ‚Äî –≤—Ö–æ–¥, CRUD, –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç.
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `api/data/*.json`.

## 4) –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
- –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É `web/bso_portal/api/data/` (JSON‚Äë–¥–∞–Ω–Ω—ã–µ).
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ (Shared Folder).
- –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ—Ç–∫–∞—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –ø–∞–ø–∫—É `api/data/`.

## 5) –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- –ü–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–ø–∏—é `api/data/`.
- –û–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ (HTML/CSS/JS, `api/*.php`).
- **–ù–µ –ø–µ—Ä–µ—Ç–∏—Ä–∞—Ç—å** `api/data/` –∏ `api/data/users.json`.
