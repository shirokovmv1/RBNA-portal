# –£–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ RBNA Portal

## –î–∞—Ç–∞: 05.02.2026

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –í—ã–Ω–æ—Å —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚úÖ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω `python-dotenv` –≤ `requirements.txt`
- –û–±–Ω–æ–≤–ª–µ–Ω `settings.py` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ `.env`
- –°–æ–∑–¥–∞–Ω `.env.example` —Å —à–∞–±–ª–æ–Ω–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `.env` —É–∂–µ –≤ `.gitignore`

**–§–∞–π–ª—ã:**
- `backend/requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω python-dotenv
- `backend/rbnaportal/settings.py` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ .env
- `backend/.env.example` - —à–∞–±–ª–æ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ .env.example –≤ .env
cp backend/.env.example backend/.env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è
# –î–ª—è production –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–º–µ–Ω–∏—Ç–µ SECRET_KEY!
```

### 2. –£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ‚úÖ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `settings.py`:**
- `SECRET_KEY` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `DEBUG` –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `ALLOWED_HOSTS` –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã security headers –¥–ª—è production (–∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ DEBUG=False)

**–ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ DEBUG=False
SECURE_SSL_REDIRECT = True
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
SECURE_BROWSER_XSS_FILTER = True
SECURE_CONTENT_TYPE_NOSNIFF = True
X_FRAME_OPTIONS = 'DENY'
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚úÖ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã `permission_classes` –≤–æ –≤—Å–µ ViewSets
- –î–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AllowAny` (–¥–æ—Å—Ç—É–ø –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ production

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ ViewSets:**
- `UserViewSet` - –¥–æ–±–∞–≤–ª–µ–Ω `permission_classes = [AllowAny]`
- `ProjectViewSet` - –¥–æ–±–∞–≤–ª–µ–Ω `permission_classes = [AllowAny]`
- `ContractorViewSet` - –¥–æ–±–∞–≤–ª–µ–Ω `permission_classes = [AllowAny]`
- `ContractViewSet` - –¥–æ–±–∞–≤–ª–µ–Ω `permission_classes = [AllowAny]`
- `CostItemViewSet` - –¥–æ–±–∞–≤–ª–µ–Ω `permission_classes = [AllowAny]`
- `UnitRateViewSet` - –¥–æ–±–∞–≤–ª–µ–Ω `permission_classes = [AllowAny]`
- `PaymentViewSet` - –¥–æ–±–∞–≤–ª–µ–Ω `permission_classes = [AllowAny]`
- `ReportViewSet` - –¥–æ–±–∞–≤–ª–µ–Ω `permission_classes = [AllowAny]`

**–î–ª—è production:**
–ó–∞–º–µ–Ω–∏—Ç–µ `AllowAny` –Ω–∞ `IsAuthenticated` –≤ –∫–∞–∂–¥–æ–º ViewSet:
```python
permission_classes = [IsAuthenticated]  # –í–º–µ—Å—Ç–æ AllowAny
```

### 4. –£–ª—É—á—à–µ–Ω–∏–µ CORS –Ω–∞—Å—Ç—Ä–æ–µ–∫ ‚úÖ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- CORS origins –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –º–µ—Ç–æ–¥—ã –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```python
CORS_ALLOWED_ORIGINS = os.environ.get(
    'CORS_ALLOWED_ORIGINS',
    'http://localhost:3000,http://127.0.0.1:3000'
).split(',')

CORS_ALLOW_METHODS = ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'OPTIONS']
CORS_ALLOW_HEADERS = ['Content-Type', 'Authorization', 'X-CSRFToken']
```

### 5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚úÖ

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã:**

#### ContractSerializer:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –æ–ø–ª–∞—á–µ–Ω–Ω–∞—è —Å—É–º–º–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—É—é
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞—Ç

#### UnitRateSerializer:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—Ü–µ–Ω–æ–∫ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞—Ç

#### PaymentSerializer:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–º–º—ã –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–≥–æ–≤–æ—Ä–∞

#### ReportSerializer:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –¥–∞—Ç –ø–µ—Ä–∏–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ consistency_score (0-100)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ processing_effort_hours –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ø—Ä–æ—Ç–æ—Ç–∏–ø):

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
cd backend
pip install -r requirements.txt
```

2. **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª:**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
python manage.py runserver
```

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ `.env.example`.

### –î–ª—è production:

1. **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª —Å production –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:**
```bash
SECRET_KEY=your-very-secure-secret-key-here
DEBUG=False
ALLOWED_HOSTS=yourdomain.com,www.yourdomain.com
CORS_ALLOWED_ORIGINS=https://yourdomain.com
SECURE_SSL_REDIRECT=True
```

2. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π SECRET_KEY:**
```bash
python manage.py shell
```
```python
from django.core.management.utils import get_random_secret_key
print(get_random_secret_key())
```

3. **–í–∫–ª—é—á–∏—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é:**
   - –ó–∞–º–µ–Ω–∏—Ç–µ `AllowAny` –Ω–∞ `IsAuthenticated` –≤–æ –≤—Å–µ—Ö ViewSets
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ JWT –∏–ª–∏ Session –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ `REST_FRAMEWORK`

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS:**
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `SECURE_SSL_REDIRECT = True`

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã:
- –ü—Ä–æ—Ç–æ—Ç–∏–ø –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ï—Å–ª–∏ `.env` —Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- `AllowAny` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ)

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. **–î–æ–±–∞–≤–∏—Ç—å JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é:**
```bash
pip install djangorestframework-simplejwt
```

2. **–î–æ–±–∞–≤–∏—Ç—å rate limiting:**
```bash
pip install django-ratelimit
```

3. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
```python
import logging
logger = logging.getLogger('security')
```

4. **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ PostgreSQL:**
```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        # ...
    }
}
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –°–µ–∫—Ä–µ—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —É–ª—É—á—à–µ–Ω—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ
- ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ production

**–°—Ç–∞—Ç—É—Å:** –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã! üéâ
